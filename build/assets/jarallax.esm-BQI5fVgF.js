/*!
 * Jarallax v2.2.1 (https://github.com/nk-o/jarallax)
 * Copyright 2024 nK <https://nkdev.info>
 * Licensed under MIT (https://github.com/nk-o/jarallax/blob/master/LICENSE)
 */var C={type:"scroll",speed:.5,containerClass:"jarallax-container",imgSrc:null,imgElement:".jarallax-img",imgSize:"cover",imgPosition:"50% 50%",imgRepeat:"no-repeat",keepImg:!1,elementInViewport:null,zIndex:-100,disableParallax:!1,onScroll:null,onInit:null,onDestroy:null,onCoverImage:null,videoClass:"jarallax-video",videoSrc:null,videoStartTime:0,videoEndTime:0,videoVolume:0,videoLoop:!0,videoPlayOnlyVisible:!0,videoLazyLoading:!0,disableVideo:!1,onVideoInsert:null,onVideoWorkerInit:null};let u;typeof window<"u"?u=window:typeof global<"u"?u=global:typeof self<"u"?u=self:u={};var c=u;function D(o,e){return typeof e=="string"?c.getComputedStyle(o).getPropertyValue(e):(Object.keys(e).forEach(i=>{o.style[i]=e[i]}),o)}function H(o,...e){return o=o||{},Object.keys(e).forEach(i=>{e[i]&&Object.keys(e[i]).forEach(t=>{o[t]=e[i][t]})}),o}function R(o){const e=[];for(;o.parentElement!==null;)o=o.parentElement,o.nodeType===1&&e.push(o);return e}function M(o){document.readyState==="complete"||document.readyState==="interactive"?o():document.addEventListener("DOMContentLoaded",o,{capture:!0,once:!0,passive:!0})}const{navigator:O}=c,z=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(O.userAgent);function k(){return z}let E,x,f;function L(){return!f&&document.body&&(f=document.createElement("div"),f.style.cssText="position: fixed; top: -9999px; left: 0; height: 100vh; width: 0;",document.body.appendChild(f)),(f?f.clientHeight:0)||c.innerHeight||document.documentElement.clientHeight}function b(){E=c.innerWidth||document.documentElement.clientWidth,k()?x=L():x=c.innerHeight||document.documentElement.clientHeight}b();c.addEventListener("resize",b);c.addEventListener("orientationchange",b);c.addEventListener("load",b);M(()=>{b()});function h(){return{width:E,height:x}}const m=[];function S(){if(!m.length)return;const{width:o,height:e}=h();m.forEach((i,t)=>{const{instance:s,oldData:a}=i;if(!s.isVisible())return;const l=s.$item.getBoundingClientRect(),n={width:l.width,height:l.height,top:l.top,bottom:l.bottom,wndW:o,wndH:e},r=!a||a.wndW!==n.wndW||a.wndH!==n.wndH||a.width!==n.width||a.height!==n.height,p=r||!a||a.top!==n.top||a.bottom!==n.bottom;m[t].oldData=n,r&&s.onResize(),p&&s.onScroll()}),c.requestAnimationFrame(S)}const j=new c.IntersectionObserver(o=>{o.forEach(e=>{e.target.jarallax.isElementInViewport=e.isIntersecting})},{rootMargin:"50px"});function B(o){m.push({instance:o}),m.length===1&&c.requestAnimationFrame(S),j.observe(o.options.elementInViewport||o.$item)}function W(o){m.forEach((e,i)=>{e.instance.instanceID===o.instanceID&&m.splice(i,1)}),j.unobserve(o.options.elementInViewport||o.$item)}const{navigator:A}=c;let I=0;class P{constructor(e,i){const t=this;t.instanceID=I,I+=1,t.$item=e,t.defaults={...C};const s=t.$item.dataset||{},a={};if(Object.keys(s).forEach(n=>{const r=n.substr(0,1).toLowerCase()+n.substr(1);r&&typeof t.defaults[r]<"u"&&(a[r]=s[n])}),t.options=t.extend({},t.defaults,a,i),t.pureOptions=t.extend({},t.options),Object.keys(t.options).forEach(n=>{t.options[n]==="true"?t.options[n]=!0:t.options[n]==="false"&&(t.options[n]=!1)}),t.options.speed=Math.min(2,Math.max(-1,parseFloat(t.options.speed))),typeof t.options.disableParallax=="string"&&(t.options.disableParallax=new RegExp(t.options.disableParallax)),t.options.disableParallax instanceof RegExp){const n=t.options.disableParallax;t.options.disableParallax=()=>n.test(A.userAgent)}if(typeof t.options.disableParallax!="function"){const n=t.options.disableParallax;t.options.disableParallax=()=>n===!0}if(typeof t.options.disableVideo=="string"&&(t.options.disableVideo=new RegExp(t.options.disableVideo)),t.options.disableVideo instanceof RegExp){const n=t.options.disableVideo;t.options.disableVideo=()=>n.test(A.userAgent)}if(typeof t.options.disableVideo!="function"){const n=t.options.disableVideo;t.options.disableVideo=()=>n===!0}let l=t.options.elementInViewport;l&&typeof l=="object"&&typeof l.length<"u"&&([l]=l),l instanceof Element||(l=null),t.options.elementInViewport=l,t.image={src:t.options.imgSrc||null,$container:null,useImgTag:!1,position:"fixed"},t.initImg()&&t.canInitParallax()&&t.init()}css(e,i){return D(e,i)}extend(e,...i){return H(e,...i)}getWindowData(){const{width:e,height:i}=h();return{width:e,height:i,y:document.documentElement.scrollTop}}initImg(){const e=this;let i=e.options.imgElement;return i&&typeof i=="string"&&(i=e.$item.querySelector(i)),i instanceof Element||(e.options.imgSrc?(i=new Image,i.src=e.options.imgSrc):i=null),i&&(e.options.keepImg?e.image.$item=i.cloneNode(!0):(e.image.$item=i,e.image.$itemParent=i.parentNode),e.image.useImgTag=!0),e.image.$item?!0:(e.image.src===null&&(e.image.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",e.image.bgImage=e.css(e.$item,"background-image")),!(!e.image.bgImage||e.image.bgImage==="none"))}canInitParallax(){return!this.options.disableParallax()}init(){const e=this,i={position:"absolute",top:0,left:0,width:"100%",height:"100%",overflow:"hidden"};let t={pointerEvents:"none",transformStyle:"preserve-3d",backfaceVisibility:"hidden"};if(!e.options.keepImg){const s=e.$item.getAttribute("style");if(s&&e.$item.setAttribute("data-jarallax-original-styles",s),e.image.useImgTag){const a=e.image.$item.getAttribute("style");a&&e.image.$item.setAttribute("data-jarallax-original-styles",a)}}if(e.css(e.$item,"position")==="static"&&e.css(e.$item,{position:"relative"}),e.css(e.$item,"z-index")==="auto"&&e.css(e.$item,{zIndex:0}),e.image.$container=document.createElement("div"),e.css(e.image.$container,i),e.css(e.image.$container,{"z-index":e.options.zIndex}),this.image.position==="fixed"&&e.css(e.image.$container,{"-webkit-clip-path":"polygon(0 0, 100% 0, 100% 100%, 0 100%)","clip-path":"polygon(0 0, 100% 0, 100% 100%, 0 100%)"}),e.image.$container.setAttribute("id",`jarallax-container-${e.instanceID}`),e.options.containerClass&&e.image.$container.setAttribute("class",e.options.containerClass),e.$item.appendChild(e.image.$container),e.image.useImgTag?t=e.extend({"object-fit":e.options.imgSize,"object-position":e.options.imgPosition,"max-width":"none"},i,t):(e.image.$item=document.createElement("div"),e.image.src&&(t=e.extend({"background-position":e.options.imgPosition,"background-size":e.options.imgSize,"background-repeat":e.options.imgRepeat,"background-image":e.image.bgImage||`url("${e.image.src}")`},i,t))),(e.options.type==="opacity"||e.options.type==="scale"||e.options.type==="scale-opacity"||e.options.speed===1)&&(e.image.position="absolute"),e.image.position==="fixed"){const s=R(e.$item).filter(a=>{const l=c.getComputedStyle(a),n=l["-webkit-transform"]||l["-moz-transform"]||l.transform;return n&&n!=="none"||/(auto|scroll)/.test(l.overflow+l["overflow-y"]+l["overflow-x"])});e.image.position=s.length?"absolute":"fixed"}t.position=e.image.position,e.css(e.image.$item,t),e.image.$container.appendChild(e.image.$item),e.onResize(),e.onScroll(!0),e.options.onInit&&e.options.onInit.call(e),e.css(e.$item,"background-image")!=="none"&&e.css(e.$item,{"background-image":"none"}),B(e)}destroy(){const e=this;W(e);const i=e.$item.getAttribute("data-jarallax-original-styles");if(e.$item.removeAttribute("data-jarallax-original-styles"),i?e.$item.setAttribute("style",i):e.$item.removeAttribute("style"),e.image.useImgTag){const t=e.image.$item.getAttribute("data-jarallax-original-styles");e.image.$item.removeAttribute("data-jarallax-original-styles"),t?e.image.$item.setAttribute("style",i):e.image.$item.removeAttribute("style"),e.image.$itemParent&&e.image.$itemParent.appendChild(e.image.$item)}e.image.$container&&e.image.$container.parentNode.removeChild(e.image.$container),e.options.onDestroy&&e.options.onDestroy.call(e),delete e.$item.jarallax}coverImage(){const e=this,{height:i}=h(),t=e.image.$container.getBoundingClientRect(),s=t.height,{speed:a}=e.options,l=e.options.type==="scroll"||e.options.type==="scroll-opacity";let n=0,r=s,p=0;return l&&(a<0?(n=a*Math.max(s,i),i<s&&(n-=a*(s-i))):n=a*(s+i),a>1?r=Math.abs(n-i):a<0?r=n/a+Math.abs(n):r+=(i-s)*(1-a),n/=2),e.parallaxScrollDistance=n,l?p=(i-r)/2:p=(s-r)/2,e.css(e.image.$item,{height:`${r}px`,marginTop:`${p}px`,left:e.image.position==="fixed"?`${t.left}px`:"0",width:`${t.width}px`}),e.options.onCoverImage&&e.options.onCoverImage.call(e),{image:{height:r,marginTop:p},container:t}}isVisible(){return this.isElementInViewport||!1}onScroll(e){const i=this;if(!e&&!i.isVisible())return;const{height:t}=h(),s=i.$item.getBoundingClientRect(),a=s.top,l=s.height,n={},r=Math.max(0,a),p=Math.max(0,l+a),$=Math.max(0,-a),w=Math.max(0,a+l-t),y=Math.max(0,l-(a+l-t)),T=Math.max(0,-a+t-l),v=1-2*((t-a)/(t+l));let d=1;if(l<t?d=1-($||w)/l:p<=t?d=p/t:y<=t&&(d=y/t),(i.options.type==="opacity"||i.options.type==="scale-opacity"||i.options.type==="scroll-opacity")&&(n.transform="translate3d(0,0,0)",n.opacity=d),i.options.type==="scale"||i.options.type==="scale-opacity"){let g=1;i.options.speed<0?g-=i.options.speed*d:g+=i.options.speed*(1-d),n.transform=`scale(${g}) translate3d(0,0,0)`}if(i.options.type==="scroll"||i.options.type==="scroll-opacity"){let g=i.parallaxScrollDistance*v;i.image.position==="absolute"&&(g-=a),n.transform=`translate3d(0,${g}px,0)`}i.css(i.image.$item,n),i.options.onScroll&&i.options.onScroll.call(i,{section:s,beforeTop:r,beforeTopEnd:p,afterTop:$,beforeBottom:w,beforeBottomEnd:y,afterBottom:T,visiblePercent:d,fromViewportCenter:v})}onResize(){this.coverImage()}}const V=function(o,e,...i){(typeof HTMLElement=="object"?o instanceof HTMLElement:o&&typeof o=="object"&&o!==null&&o.nodeType===1&&typeof o.nodeName=="string")&&(o=[o]);const t=o.length;let s=0,a;for(s;s<t;s+=1)if(typeof e=="object"||typeof e>"u"?o[s].jarallax||(o[s].jarallax=new P(o[s],e)):o[s].jarallax&&(a=o[s].jarallax[e].apply(o[s].jarallax,i)),typeof a<"u")return a;return o};V.constructor=P;const N=V;export{N as jarallax};
